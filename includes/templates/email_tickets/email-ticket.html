<!doctype html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta charset="utf-8">
  <title>{{evento_nombre}} - Ticket</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    /* Reset básico compatible email */
    body, table, td, a { -webkit-text-size-adjust:100%; -ms-text-size-adjust:100%; }
    table, td { mso-table-lspace:0pt; mso-table-rspace:0pt; }
    img { -ms-interpolation-mode:bicubic; border:0; outline:none; text-decoration:none; display:block; }
    body { margin:0; padding:0; width:100% !important; height:100% !important; background:#f6f8fb; }
    /* Contenedor máx ancho */
    .container { width:100%; max-width:640px; margin:0 auto; }
    /* Card */
    .card { background:#ffffff; border:1px solid #e5e7eb; border-radius:14px; overflow:hidden; }
    .inner { padding:24px; }
    /* Tipografía */
    h1 { margin:0 0 12px 0; font-size:22px; line-height:1.25; color:#1f2937; }
    h2 { margin:20px 0 6px 0; font-size:18px; line-height:1.3; color:#1f2937; }
    p  { margin:6px 0; color:#1f2937; }
    .muted { color:#6b7280; font-size:13px; }
    /* Bloques key/val */
    .kvs { border:1px dashed #e5e7eb; border-radius:10px; padding:12px; background:#fafafa; }
    .kv  { margin:6px 0; }
    .kv b{ color:#111827; margin-right:6px; }
    /* Botones simples */
    .btn { display:inline-block; padding:10px 14px; border-radius:10px; font-weight:600; text-decoration:none; }
    .btn-dark    { background:#111827; color:#ffffff !important; }
    .btn-gray    { background:#e5e7eb; color:#111827 !important; }
    /* QR */
    .qr-box { border:1px solid #e5e7eb; border-radius:10px; padding:10px; background:#ffffff; display:inline-block; }
    .qr-img { width:220px; max-width:100%; height:auto; }
    /* Columnas apilables */
    .col { vertical-align:top; }
    .stack { width:100% !important; display:block !important; }
    .pad-16 { padding:16px !important; }

    /* --- Fila wallet a ancho completo, centrada --- */
    .actions-wallet { text-align:center; }
    .row-wallet { margin:0 auto; }
    .row-wallet td { padding:0 8px; }
    .btn-img { padding:0 !important; line-height:0 !important; border-radius:12px; display:inline-block; }
    .btn-img img { display:block; height:auto; border:0; outline:none; }

    /* Mobile */
    @media screen and (max-width:600px){
      .inner { padding:16px !important; }
      .stack-center { text-align:center !important; }
      .btn { width:100% !important; text-align:center !important; }
      /* Apilar botones wallet en móvil */
      .row-wallet { width:100% !important; }
      .row-wallet td { display:block !important; width:100% !important; padding:6px 0 !important; }
      .row-wallet a, .row-wallet img { width:100% !important; max-width:280px !important; margin:0 auto !important; }
    }
  </style>
  <!-- Solo claro -->
  <meta name="color-scheme" content="light only">
  <meta name="supported-color-schemes" content="light only">
</head>
<body>

  <!-- Preheader oculto para inbox preview -->
  <div style="display:none;max-height:0;overflow:hidden;color:transparent;opacity:0;">
    Tu ticket para {{evento_nombre}}. Guarda el pase en Apple Wallet o Google Wallet, descarga el PDF o añade al calendario.
  </div>

  <!-- Wrapper de ancho completo -->
  <table role="presentation" cellpadding="0" cellspacing="0" border="0" width="100%">
    <tr>
      <td align="center" style="padding:24px;">
        <table role="presentation" cellpadding="0" cellspacing="0" border="0" class="container">
          <tr>
            <td>
              <!-- Tarjeta -->
              <table role="presentation" cellpadding="0" cellspacing="0" border="0" width="100%" class="card">
                <!-- Header imagen -->
                <tr>
                  <td>
                    <img src="{{header_img}}" alt="Encabezado del evento" width="640" style="width:100%; height:auto;">
                  </td>
                </tr>

                <!-- Contenido -->
                <tr>
                  <td class="inner">
                    <h1>{{evento_nombre}}</h1>

                    <!-- Grid 2 columnas en desktop, apilado en móvil -->
                    <table role="presentation" cellpadding="0" cellspacing="0" border="0" width="100%">
                      <tr>
                        <!-- Col izquierda -->
                        <td class="col" width="60%" style="padding-right:12px;">
                          <h2>Detalles del evento</h2>
                          <div class="kvs">
                            <div class="kv"><b>Organizador:</b><span>{{organizador}}</span></div>
                            <div class="kv"><b>Fecha:</b><span>{{fecha_evento}}</span></div>
                            <div class="kv"><b>Hora:</b><span>{{hora_evento}}</span></div>
                            <div class="kv"><b>Lugar:</b><span>{{lugar_evento}}</span></div>
                          </div>

                          <h2 style="margin-top:16px;">Tu ticket</h2>
                          <div class="kvs">
                            <div class="kv"><b>Nombre:</b><span>{{asistente_nombre}}</span></div>
                            <div class="kv"><b>Correo:</b><span>{{asistente_email}}</span></div>
                            <div class="kv"><b>Contacto:</b><span>{{asistente_tel}}</span></div>
                            <!--<div class="kv"><b>Localidad:</b><span>{{asistente_localidad}}</span></div>-->
                            <div class="kv"><b>ID:</b><span>{{ticket_id}}</span></div>
                          </div>

                          <!-- Bloque opcional del organizador (solo se muestra si existe mensaje) -->
                          {{mensaje_extra_block}}
                        </td>

                        <!--[if mso]><td width="12"></td><![endif]-->

                        <!-- Col derecha (QR) -->
                        <td class="col stack-center" width="40%" align="center" style="padding-left:12px;">
                          <div class="qr-box">
                            <img class="qr-img" src="{{qr_url}}" alt="QR del ticket">
                          </div>
                          <p class="muted" style="margin-top:8px;">Presenta este código en el acceso.</p>
                          <p style="margin-top:8px;">
                            <a class="btn btn-gray" href="{{pdf_url}}" target="_blank" rel="noopener noreferrer" aria-label="Descargar PDF">Descargar PDF</a>
                          </p>
                          <p style="margin-top:8px;">
                            <a class="btn btn-gray" href="{{ics_url}}" target="_blank" rel="noopener noreferrer" aria-label="Añadir al Calendario (ICS)">Añadir al Calendario (ICS)</a>
                          </p>
                        </td>
                      </tr>

                      <tr>
                        <td class="stack pad-16" colspan="2" style="display:none; mso-hide:all;"></td>
                      </tr>
                    </table>

                    <!-- Fila a ancho completo con botones gráficos de Wallet -->
                    <div class="actions-wallet" style="margin-top:16px;">
                      <table role="presentation" cellpadding="0" cellspacing="0" border="0" class="row-wallet" align="center">
                        <tr>
                          <td align="center">
                            <a class="btn wallet-google btn-img" href="{{wallet_android_url}}" target="_blank" rel="noopener noreferrer" aria-label="Añadir a Google Wallet">
                              <img src="{{wallet_android_img}}" alt="Ver en Google Wallet" width="200">
                            </a>
                          </td>
                          <td align="center">
                            <a class="btn wallet-apple btn-img" href="{{wallet_apple_url}}" target="_blank" rel="noopener noreferrer" aria-label="Añadir a Apple Wallet">
                              <img src="{{wallet_apple_img}}" alt="Agregar a Apple Wallet" width="200">
                            </a>
                          </td>
                        </tr>
                      </table>
                    </div>

                  </td>
                </tr>
              </table>

              <!-- Nota inferior -->
              <p class="muted" style="text-align:center; margin:12px 0 0;">Si no esperabas este correo, puedes ignorarlo.</p>

              <!-- Footer logo -->
              <table role="presentation" cellpadding="0" cellspacing="0" border="0" width="100%" style="margin-top:20px;">
                <tr>
                  <td align="center" style="font-size:12px; color:#9ca3af;">
                    <a href="https://eventosapp.com" target="_blank" rel="noopener noreferrer" style="text-decoration:none; color:#9ca3af;">
                      <img src="https://eventosapp.com/wp-content/uploads/2025/06/cropped-eventosapp_logo_color.png" alt="EventosApp" width="90" style="width:90px; height:auto; margin:0 auto;">
                    </a>
                    <div style="margin-top:6px;">Enviado con EventosApp</div>
                  </td>
                </tr>
              </table>

            </td>
          </tr>
        </table>
      </td>
    </tr>
  </table>

</body>
</html>
